import{e,r,j as t}from"./vendor-react-r_DLG1Wr.js";import{s as a}from"./vendor-firebase-BMH949tH.js";import{a as s,u as o,b as d}from"./index-BSEvHwPB.js";import{C as i}from"./CoffeeCard-CfNzhjRy.js";function n(){const n=e(),{user:l}=s(),{favorites:c}=o(),[x,m]=r.useState([]),[f,h]=r.useState(!0);r.useEffect(()=>{(async()=>{if(0===c.length)return m([]),void h(!1);try{const e=await fetch("/api/coffee"),{data:r}=await e.json(),t=r.filter(e=>c.includes(e.id));m(t)}catch(e){}finally{h(!1)}})()},[c]);return l?t.jsx("div",{className:"bg-cream-light dark:bg-dark-bg min-h-screen p-4 pt-24",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("div",{className:"max-w-md mx-auto text-center mb-12",children:t.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-xl p-8 md:p-10 flex flex-col items-center",children:[l.photoURL&&t.jsx("img",{src:l.photoURL,alt:"Profile",className:"w-24 h-24 rounded-full mb-4 border-4 border-cream-dark dark:border-dark-border object-cover"}),!l.photoURL&&t.jsx("div",{className:"w-24 h-24 rounded-full mb-4 border-4 border-cream-dark dark:border-dark-border bg-coffee-medium dark:bg-dark-accent flex items-center justify-center text-white text-3xl font-bold",children:l.displayName?.charAt(0).toUpperCase()||l.email?.charAt(0).toUpperCase()||"?"}),t.jsxs("h2",{className:"text-3xl font-bold text-coffee-dark dark:text-dark-text mb-2",children:["Welcome, ",l.displayName||"Coffee Lover","!"]}),t.jsx("p",{className:"text-coffee-medium dark:text-dark-text-secondary mb-8",children:l.email}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[t.jsxs("a",{href:"#my-favourites",className:"flex-1 flex items-center justify-center gap-3 px-4 py-3 bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-coffee-medium focus:ring-opacity-50",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500",children:t.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),t.jsxs("span",{className:"text-sm font-medium text-coffee-dark dark:text-dark-text",children:["My Favourites (",c.length,")"]})]}),t.jsxs("button",{onClick:async()=>{try{await a(d),n("/")}catch(e){}},className:"flex-1 flex items-center justify-center gap-3 px-4 py-3 bg-red-500 text-white font-bold rounded-lg shadow-md hover:bg-red-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Logout"]})]})]})}),t.jsxs("div",{id:"my-favourites",className:"pt-16 -mt-16",children:[t.jsxs("h3",{className:"text-3xl font-bold text-coffee-dark dark:text-dark-text text-center mb-8 flex items-center justify-center gap-3",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500",children:t.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),"My Favourite Beans"]}),f?t.jsxs("div",{className:"text-center py-20 px-5 bg-white dark:bg-dark-surface rounded-2xl shadow-lg",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-coffee-medium dark:border-dark-accent mx-auto mb-4"}),t.jsx("p",{className:"text-coffee-medium dark:text-dark-text-secondary",children:"Loading your favorites..."})]}):x.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x.map(e=>t.jsx(i,{bean:e},e.id))}):t.jsxs("div",{className:"text-center py-20 px-5 bg-white dark:bg-dark-surface rounded-2xl shadow-lg",children:[t.jsx("div",{className:"text-6xl mb-5 opacity-50",children:"â¤ï¸â€ðŸ©¹"}),t.jsx("h3",{className:"text-2xl text-coffee-dark dark:text-dark-text mb-2.5",children:"No Favourites Yet"}),t.jsx("p",{className:"text-base text-coffee-light dark:text-dark-text-secondary mb-8",children:"Click the heart icon on any coffee to save it here."}),t.jsx("button",{onClick:()=>n("/"),className:"px-8 py-3.5 bg-coffee-medium dark:bg-dark-accent text-white border-none rounded-xl text-base font-semibold cursor-pointer transition-all duration-300 shadow-md hover:bg-coffee-brown dark:hover:bg-dark-accent/80 hover:-translate-y-0.5 hover:shadow-lg",children:"Discover Beans"})]})]})]})}):t.jsx("div",{className:"bg-cream-light dark:bg-dark-bg min-h-screen flex items-center justify-center p-4 pt-24",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-coffee-dark dark:text-dark-text mb-4",children:"Please log in to view your profile"}),t.jsx("button",{onClick:()=>n("/login"),className:"px-8 py-3.5 bg-coffee-medium dark:bg-dark-accent text-white rounded-xl text-base font-semibold transition-all duration-300 shadow-md hover:bg-coffee-brown dark:hover:bg-dark-accent/80 hover:-translate-y-0.5 hover:shadow-lg",children:"Go to Login"})]})})}export{n as default};
